# NPM - Folder node_modules

NPM didn't force to put that folder in the project directory, you can put it somewhere else then just add the folder's location to the PATH.

Consider this example:

```Dockerfile
WORKDIR /opt/node_app

COPY package*.json ./

RUN \
    yarn install --production=false --no-optional; \
    yarn cache clean --force; \

# Add this folder in the PATH so npm can retrieve it from there
ENV PATH="/opt/node_app/node_modules/.bin:$PATH"

WORKDIR /home/node

COPY --chown=node:node . .

# RUN ln -s /opt/node_app/node_modules node_modules

RUN yarn dev
```

We'll use the `/opt/node_app` folder and copy there the `package.json` (and `package-lock.json` if any) then run `yarn install` from there. Installing dependencies is put in a separate layer so while the `package.json` file isn't modified, the layer stay valid and shouldn't be executed again. **We'll have a better experience with less time needed for the built of the image.**

We'll update the `PATH` variable and add our `/opt/node_app` folder.

Then we'll switch to the `/home/node` folder where our application is installed, copy our project's files between the host and the container.

Finally, we start yarn. Since the `node_modules` is not there, yarn / npm will search for the modules in the `PATH` and will retrieve our files.

Note: if this doesn't work, just uncomment the `RUN ls` command.
